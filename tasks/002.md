### **Задача 2 (then): Сбор данных для виджета персонального дашборда с использованием `.then()`**

### Решение задачи

```javascript
// Функция, имитирующая запрос погоды
function fetchWeather() {
  return new Promise(resolve => {
    setTimeout(() => {
      console.log('Данные о погоде получены');
      resolve({ temp: 15, condition: 'Облачно' });
    }, 1100); // Задержка 1.1 секунды
  });
}

// Функция, имитирующая запрос курса валют
function fetchExchangeRate() {
  return new Promise(resolve => {
    setTimeout(() => {
      console.log('Курс валют получен');
      resolve(91.5); // Пример курса USD/RUB
    }, 700); // Задержка 0.7 секунды
  });
}

// Функция, имитирующая запрос главной новости
function fetchTopHeadline() {
  return new Promise(resolve => {
    setTimeout(() => {
      console.log('Главная новость получена');
      resolve('Ученые обнаружили новый способ изучения асинхронности!');
    }, 1400); // Задержка 1.4 секунды
  });
}

// Функция для загрузки данных виджета с использованием Promise.all().then().catch()
// Обрати внимание: функция НЕ async
function loadDashboardWidget() {
  console.log('Начинаем параллельную загрузку данных для виджета (через .then)...');
  console.time('WidgetLoadThen'); // Запускаем таймер

  // Создаем массив промисов, вызывая все три функции
  const promises = [
    fetchWeather(),
    fetchExchangeRate(),
    fetchTopHeadline()
  ];

  // Используем Promise.all для параллельного выполнения
  Promise.all(promises)
    .then(results => {
      // Этот колбэк выполнится, когда ВСЕ промисы в массиве 'promises' успешно разрешатся (resolve)
      console.timeEnd('WidgetLoadThen'); // Останавливаем таймер при успехе

      // 'results' - это массив с результатами выполнения промисов,
      // в том же порядке, в котором они были в массиве 'promises'
      const [weatherData, exchangeRate, topHeadline] = results;

      // Выводим собранные данные
      console.log('\n--- Данные для виджета (через .then) УСПЕШНО загружены! ---');
      console.log(`Погода: ${weatherData.temp}°C, ${weatherData.condition}`);
      console.log(`Курс USD/RUB: ${exchangeRate}`);
      console.log(`Главная новость: ${topHeadline}`);
      console.log('----------------------------------------------------------');
    })
    .catch(error => {
      // Этот колбэк выполнится, если ХОТЯ БЫ ОДИН промис в массиве 'promises'
      // будет отклонен (reject)
      console.timeEnd('WidgetLoadThen'); // Останавливаем таймер и при ошибке
      console.error('\n--- Ошибка при загрузке данных виджета (через .catch) ---');
      console.error('Причина:', error);
      console.log('----------------------------------------------------------');
    });

    // Обрати внимание: код после Promise.all(...).then().catch() выполнится
    // СРАЗУ ЖЕ, не дожидаясь завершения промисов.
    console.log('   Запросы отправлены, ожидание результатов...');
}

// Запускаем загрузку данных виджета
loadDashboardWidget();

```
