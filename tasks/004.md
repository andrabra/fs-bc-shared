### **–ó–∞–¥–∞—á–∞ 4: –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞–ª–∏—á–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤**

### –†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏

```javascript
// –§—É–Ω–∫—Ü–∏—è –∏–º–∏—Ç–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è –û–î–ù–û–ì–û —Ç–æ–≤–∞—Ä–∞ (–º–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å)
function checkItemStock(itemName) {
  return new Promise((resolve, reject) => {
    // –°–ª—É—á–∞–π–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –æ—Ç 100 –¥–æ 600 –º—Å
    const delay = Math.random() * 500 + 100;
    setTimeout(() => {
      const isInStock = Math.random() > 0.1; // 90% —à–∞–Ω—Å –Ω–∞–ª–∏—á–∏—è
      if (isInStock) {
        console.log(`   [–ü—Ä–æ–≤–µ—Ä–∫–∞] –¢–æ–≤–∞—Ä "${itemName}" - –í –ù–ê–õ–ò–ß–ò–ò (–æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ ${delay.toFixed(0)} –º—Å)`);
        resolve({ item: itemName, status: 'in_stock' });
      } else {
        console.error(`   [–ü—Ä–æ–≤–µ—Ä–∫–∞] –¢–æ–≤–∞—Ä "${itemName}" - –ó–ê–ö–û–ù–ß–ò–õ–°–Ø! (–æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ ${delay.toFixed(0)} –º—Å)`);
        reject(new Error(`–¢–æ–≤–∞—Ä "${itemName}" –∑–∞–∫–æ–Ω—á–∏–ª—Å—è –Ω–∞ —Å–∫–ª–∞–¥–µ.`));
      }
    }, delay);
  });
}

// –§—É–Ω–∫—Ü–∏—è –∏–º–∏—Ç–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–∞ (—É—Å–ø–µ—à–Ω–∞—è)
function processPayment(orderInfo) {
  return new Promise(resolve => {
    setTimeout(() => {
      const paymentId = `PAY-${Date.now()}`;
      console.log(`   [–û–ø–ª–∞—Ç–∞] –ü–ª–∞—Ç–µ–∂ –Ω–∞ —Å—É–º–º—É ${orderInfo.total} –æ–±—Ä–∞–±–æ—Ç–∞–Ω. ID: ${paymentId}`);
      resolve({ paymentId: paymentId, status: 'paid', amount: orderInfo.total });
    }, 1000); // 1 —Å–µ–∫
  });
}

// –§—É–Ω–∫—Ü–∏—è –∏–º–∏—Ç–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ (—É—Å–ø–µ—à–Ω–∞—è)
function createOrder(paymentInfo) {
  return new Promise(resolve => {
    setTimeout(() => {
      const orderId = `ORD-${Date.now()}`;
      console.log(`   [–°–æ–∑–¥–∞–Ω–∏–µ] –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω. ID: ${orderId}`);
      resolve({ orderId: orderId, status: 'created', paymentId: paymentInfo.paymentId });
    }, 500); // 0.5 —Å–µ–∫
  });
}

// –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
async function placeOrder(items) {
  console.log(`\n--- –ü–æ–ø—ã—Ç–∫–∞ –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ –¥–ª—è: [${items.join(', ')}] ---`);
  const startTime = Date.now();

  try {
    // --- –®–∞–≥ 1: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ ---
    console.log('–®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–µ...');
    // –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –ø—Ä–æ–º–∏—Å–æ–≤, –≤—ã–∑—ã–≤–∞—è checkItemStock –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
    const stockCheckPromises = items.map(item => checkItemStock(item));
    // –ñ–¥–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –í–°–ï–• –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
    // –ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫–ª–æ–Ω–∏—Ç—Å—è (reject), Promise.all —Ç–æ–∂–µ –æ—Ç–∫–ª–æ–Ω–∏—Ç—Å—è
    const stockResults = await Promise.all(stockCheckPromises);
    // –ï—Å–ª–∏ –º—ã –∑–¥–µ—Å—å, –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –≤ –Ω–∞–ª–∏—á–∏–∏
    console.log('   ‚úÖ –í—Å–µ —Ç–æ–≤–∞—Ä—ã –≤ –Ω–∞–ª–∏—á–∏–∏!');
    // stockResults —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Å—Å–∏–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ—Ç –∫–∞–∂–¥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

    // --- –®–∞–≥ 2: –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞ (–ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏) ---
    console.log('–®–∞–≥ 2: –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞...');
    const paymentDetails = { items: items, total: items.length * 100 }; // –ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—É–º–º–∞
    const paymentResult = await processPayment(paymentDetails);
    console.log('   ‚úÖ –ü–ª–∞—Ç–µ–∂ —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω.');

    // --- –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (–ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã) ---
    console.log('–®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –≤ —Å–∏—Å—Ç–µ–º–µ...');
    const orderResult = await createOrder(paymentResult);
    console.log('   ‚úÖ –ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω.');

    // --- –£—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ ---
    const endTime = Date.now();
    console.log(`\n--- üéâ –ó–∞–∫–∞–∑ [${orderResult.orderId}] –£–°–ü–ï–®–ù–û –æ—Ñ–æ—Ä–º–ª–µ–Ω! ---`);
    console.log(`   –°–æ—Å—Ç–∞–≤: ${items.join(', ')}`);
    console.log(`   –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ${(endTime - startTime) / 1000} —Å–µ–∫.`);
    return orderResult;

  } catch (error) {
    // --- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –Ω–∞ –ª—é–±–æ–º –∏–∑ —ç—Ç–∞–ø–æ–≤ ---
    const endTime = Date.now();
    console.error(`\n--- ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞! ---`);
    console.error(`–ü—Ä–∏—á–∏–Ω–∞: ${error.message}`);
    // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É, –Ω–∞ –∫–∞–∫–æ–º —ç—Ç–∞–ø–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞,
    // –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–≤–µ—Ä—è—è —Ç–∏–ø –æ—à–∏–±–∫–∏ –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ.
    // if (error.message.includes('–∑–∞–∫–æ–Ω—á–∏–ª—Å—è –Ω–∞ —Å–∫–ª–∞–¥–µ')) {
    //   console.error('–≠—Ç–∞–ø: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–æ–≤–∞—Ä–∞.');
    // } else {
    //   console.error('–≠—Ç–∞–ø: –û–ø–ª–∞—Ç–∞ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞.');
    // }
    console.log(`   –í—Ä–µ–º—è –¥–æ –æ—à–∏–±–∫–∏: ${(endTime - startTime) / 1000} —Å–µ–∫.`);
    console.log(`--- –ü—Ä–æ—Ü–µ—Å—Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –ø—Ä–µ—Ä–≤–∞–Ω. ---`);
    return null;
  }
}

// --- –ü—Ä–∏–º–µ—Ä—ã –≤—ã–∑–æ–≤–∞ ---
placeOrder(['–ù–æ—É—Ç–±—É–∫', '–ú—ã—à—å', '–ö–æ–≤—Ä–∏–∫']); // –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —É—Å–ø–µ—à–Ω–æ

setTimeout(() => {
  placeOrder(['–ö–Ω–∏–≥–∞', '–†—É—á–∫–∞ "–ü–∞—Ä–∫–µ—Ä"', '–õ–∞–º–ø–∞']); // –ú–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ –Ω–∞–ª–∏—á–∏—è
}, 3000);

setTimeout(() => {
  placeOrder(['–¢–µ–ª–µ—Ñ–æ–Ω', '–ó–∞—Ä—è–¥–∫–∞']); // –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —É—Å–ø–µ—à–Ω–æ
}, 6000);

```
